# def send_slack_message(message):
#     client = WebClient(token=SLACK_TOKEN)
#     try:
#         response = client.chat_postMessage(channel=SLACK_CHANNEL, text=message)
#         return response["ts"]  # timestamp of the message
#     except SlackApiError as e:
#         logging.error("Error posting message to Slack: %s", e.response["error"])
#         return None


# @app.route('/slack-command', methods=['POST'])
# def slack_command():
#     command_text = request.form.get('text', '').strip()
#
#     # Process the command_text and execute your video download logic here
#     if not command_text.startswith("https://www.youtube.com/"):
#         response_message = "Invalid YouTube link. Please provide a valid YouTube video link."
#         send_slack_message(response_message)
#         return '', 200
#
#     # Example: Download the video from a given YouTube link
#     yt = YouTube(command_text)
#     ys = yt.streams.get_highest_resolution()
#     ys.download('./', filename=yt.title + '.mp4')
#
#     # Upload the downloaded video to S3
#     upload_file(yt.title)
#
#     # Send a response to Slack
#     response_message = f"Video '{yt.title}' downloaded and uploaded to S3!"
#     send_slack_message(response_message)
#
#     return '', 200
#
#
# if __name__ == '__main__':
#     app.run(debug=True)